<section class="banner">
    <img src="assets/images/contact-1.webp" alt="" srcset="" />

    <div class="banner-content">
        <h2 class="heading heading--m">Tell us about your project</h2>

        <p>
            We'd love to hear more about your project. Please, leave a message
            below or give us a call. We have two offices, one in Texas and one
            in Tennessee. If you find yourself nearby, come say hello!
        </p>
    </div>
</section>

<section class="contact__detail">
    <h2 class="heading heading--m heading--decorative">Contact Details</h2>

    @for (contact of contacts$ | async; track contact.name) {
        <div class="contact__info">
            <div class="main-part">
                <h4 class="sub-heading">{{ contact.name }}</h4>

                <address>
                    <div>Mail: {{ contact.mail }}</div>
                    <div>Address: {{ contact.address }}</div>
                    <div>Phone: {{ contact.phone }}</div>
                </address>
            </div>

            <button
                (click)="viewOnMap(contact)"
                class="btn btn--action btn--reverse"
            >
                View On Map
            </button>
        </div>
    } @empty {
        <p>Nothing to see here</p>
    }
</section>

<section class="contact__map-wrapper">
    <div id="map" class="contact__map"></div>
</section>

<section class="contact__form">
    <h2 class="heading heading--m">Connect with us</h2>

    <form class="main-form" [formGroup]="form" (submit)="submitForm()">
        <div class="form-field">
            <input
                #nameInput
                type="text"
                name="name"
                placeholder="Name"
                formControlName="name"
            />

            @defer (on interaction(nameInput)) {
                <fm-form-error-message
                    [control]="form.controls.name"
                    [errorList]="errorList['name']"
                ></fm-form-error-message>
            }
        </div>

        <div class="form-field">
            <input
                #emailInput
                type="email"
                name="email"
                placeholder="Email"
                formControlName="email"
            />

            @defer (on interaction(emailInput)) {
                <fm-form-error-message
                    [control]="form.controls.email"
                    [errorList]="errorList['email']"
                ></fm-form-error-message>
            }
        </div>

        <div class="form-field">
            <textarea
                #messageInput
                name="message"
                rows="5"
                placeholder="Message"
                formControlName="message"
            ></textarea>

            @defer (on interaction(messageInput)) {
                <fm-form-error-message
                    [control]="form.controls.message"
                    [errorList]="errorList['message']"
                ></fm-form-error-message>
            }
        </div>

        <button type="submit" class="btn btn--action btn--action-only"></button>
    </form>
</section>
